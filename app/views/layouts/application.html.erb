<!DOCTYPE html>
<html>
  <head>
    <title>Back Alley Studio</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <!-- Rails builds -->
    <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>
    <%= javascript_include_tag "application", "data-turbo-track": "reload", defer: true %>
  </head>

  <body class="<%= content_for?(:body_class) ? yield(:body_class) : 'bg-gray-50 text-gray-900' %> font-sans">
    <header class="bg-black text-white px-8 py-5 flex justify-between items-center sticky top-0 z-50 border-b border-white/5">
      <h1 class="text-sm font-bold tracking-widest uppercase"><%= link_to "Back Alley Studio", root_path %></h1>
      <nav class="flex items-center gap-8">
        <%= link_to "Home", root_path, class: "text-sm text-neutral-400 hover:text-white transition-colors duration-200 #{request.path == '/' ? 'text-white' : ''}" %>
        <%= link_to "Cabs", cabs_path, class: "text-sm hover:text-white transition-colors duration-200 #{request.path.start_with?('/cabs') ? 'text-amber-400 hover:text-amber-300' : 'text-neutral-400'}" %>
        <%= link_to "About", "#", class: "text-sm text-neutral-400 hover:text-white transition-colors duration-200" %>
        <%= link_to "Contact", "#", class: "text-sm text-neutral-400 hover:text-white transition-colors duration-200" %>
        <% cart_count = (session[:cart] || []).size %>
        <%= link_to cart_path,
              class: "text-sm flex items-center gap-1.5 transition-colors duration-200 #{request.path == '/cart' ? 'text-amber-400' : 'text-neutral-400 hover:text-white'}" do %>
          <span>Cart</span>
          <% if cart_count > 0 %>
            <span class="text-[10px] font-bold px-1.5 py-0.5 rounded-sm" style="background: #c07838; color: #0c0a07;"><%= cart_count %></span>
          <% end %>
        <% end %>
      </nav>
    </header>

    <main class="<%= content_for?(:main_class) ? yield(:main_class) : 'max-w-4xl mx-auto p-8' %>">
      <%= yield %>
    </main>

    <footer class="text-center p-6 text-sm border-t mt-12 <%= content_for?(:footer_class) ? yield(:footer_class) : 'text-gray-500 border-gray-200' %>">
      Â© <%= Date.today.year %> Back Alley Studio
    </footer>
  </body>
</html>
